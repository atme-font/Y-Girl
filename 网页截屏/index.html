<!DOCTYPE HTML>
<html>
<head>
    <title>网页截图</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width"/>
    <meta name="keywords" content="网页截图,网页快照,html2canvas,html2image"/>
    <meta name="description" content="当前网页生成为图片"/>

    <link href="//static.acgist.com/resources/css/style.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="//static.acgist.com/resources/js/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="//static.acgist.com/demo/html2canvas/html2canvas.js"></script>
</head>
<body>
<div>kjaklsdjaklsdjfajskldjfklaj</div>
<img id="showImg"/>
<div onclick="save()" id="content">
    <p style="height: 100px; width: 100px; background-color: red"></p>
</div>
<script type="text/javascript">
    var $download = $('<a id="download"></a>');
//    $download.hide().appendTo("content");
    function save() {
        html2canvas(document.getElementById('content'), {
            onrendered: function (canvas) {
                var image = canvas.toDataURL("image/png").replace("image/png", "image/octet-stream;");
                console.log(image)
                document.getElementById('showImg').src = image;
//                $download.attr("href", image);
//                $download.attr("download", "image.png");
//                var event = document.createEvent("MouseEvents");
//                event.initMouseEvent("click", true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
//                $download[0].dispatchEvent(event);
            }
        });
    }
</script>
</body>
</html>
